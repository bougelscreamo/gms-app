import{r as c,s as v,Q as h,z as w,c as b,a as s,x,i as u,v as d,j as m,k as p,o as y}from"./entry.69edd33e.js";import{u as k,a as S}from"./data.8bfc3874.js";import{S as l}from"./sweetalert2.all.7ef268f0.js";const U=""+new URL("logo-biofarma.8e068430.png",import.meta.url).href;const M={class:"d-md-flex half"},P=s("div",{class:"bg"},null,-1),j={class:"contents"},L={class:"container"},B={class:"row align-items-center justify-content-center bg-dark"},D={class:"col-md-12"},E={class:"form-block mx-auto bg-dark"},R=s("div",{class:"text-center mb-5 text-primary"},[s("img",{src:U,width:"200"}),s("h3",null,[s("strong",null,"GMS")]),s("h3",null,"GMP Monitoring System")],-1),V={class:"form-group first"},$=s("label",{for:"login-username"},"Username",-1),q={class:"form-group last mb-3"},A=s("label",{for:"login-password"},"Password",-1),C=s("input",{type:"submit",value:"Log In",class:"btn btn-block btn-primary"},null,-1),G=s("div",{class:"container bg-dark"},[s("div",{class:"text-center mb-5 text-primary"},[s("strong",null,"Copyright Â© 2023 Omron Corp.")])],-1),Q={__name:"login",setup(I){const o=c(""),r=c(""),_=v(),{status:W,signIn:g}=h(),e=k(),f=S();w(async()=>{await e.checkDevice(),e.checkdevices&&(console.log(e.data.users[0]),o.value=e.data.users[0].username,r.value=e.data.users[0].password,i()),console.log(`store.devices : ${e.checkdevices}`),console.log(`auth.getUser.jwt : ${f.getUser.jwt}`)});async function i(){await g("credentials",{username:o.value,password:r.value,redirect:!1,callbackUrl:"/Maps"}).then(n=>{n.error==null?l.fire({title:"Success!",text:"Login Success",icon:"success",timer:1e3}):l.fire({title:"Error!",text:"Wrong Username or Password",icon:"error"}),_.push({path:"/"})}).catch(n=>{console.log(n),l.fire({title:"Error!",text:"Wrong Username or Password",icon:"error"})})}return(n,t)=>(y(),b("div",M,[P,s("div",j,[s("div",L,[s("div",B,[s("div",D,[s("div",E,[R,s("form",{onSubmit:t[2]||(t[2]=x(a=>i(),["prevent"]))},[s("div",V,[$,u(s("input",{class:"form-control",id:"login-username",type:"text",name:"login-username",required:"","data-msg":"Please enter your username","onUpdate:modelValue":t[0]||(t[0]=a=>p(o)?o.value=a:null)},null,512),[[d,m(o)]])]),s("div",q,[A,u(s("input",{class:"form-control",id:"login-password",type:"password",name:"login-password",required:"","data-msg":"Please enter your password","onUpdate:modelValue":t[1]||(t[1]=a=>p(r)?r.value=a:null)},null,512),[[d,m(r)]])]),C],32)])])])]),G])]))}};export{Q as default};
