import{_ as R}from"./nuxt-link.0330aa19.js";import{s as E,g as j,r as m,h as F,c as u,a as t,i as w,v as M,j as c,k as x,F as U,m as N,d as g,n as O,t as _,o as d,b as Y,w as G,l as D}from"./entry.69edd33e.js";import{u as J}from"./data.8bfc3874.js";import{S as b}from"./sweetalert2.all.7ef268f0.js";const X={class:"content"},q={class:"container-fluid",style:{"padding-bottom":"10px"}},z={class:"card card-primary"},H=t("div",{class:"card-header"},"Users",-1),I={class:"card-body"},K={class:"row"},Q={class:"col-md-12"},W={role:"group",class:"input-group mb-3 input-group-md"},Z=t("div",{class:"input-group-prepend"},[t("div",{class:"input-group-text"},"Search...")],-1),tt={class:"input-group-append"},et=["disabled"],st={class:"card-body bg-dark",id:"theContainer"},at={class:"row"},ot={class:"col-md-12"},lt={role:"group",class:"input-group mb-3 input-group-md"},nt={class:"table table-bordered"},it=t("thead",{class:"bg-secondary"},[t("tr",null,[t("th",null,"Action"),t("th",null,"Full Name"),t("th",null,"User Name"),t("th",null,"Role Name"),t("th",null,"Status"),t("th",null,"Last Online")])],-1),rt=["onClick"],ut={key:0,class:"right badge badge-success"},dt={key:1,class:"right badge badge-danger"},ct=t("td",null,null,-1),pt={class:"card-footer"},_t=["value"],vt={class:"pagination pagination-sm m-0 float-right"},mt={class:"page-item"},gt={class:"page-item"},A=10,wt={__name:"index",async setup(ft){let y,C;const i=J(),S=E();[y,C]=j(()=>i.getUserList()),await y,C();const n=m("");let a=m(1),v=m(0),r=m(0);v=i.$state.data.users.data.length;function $(l,e,o){return l.slice((o-1)*e,o*e)}const p=F(()=>{let l=i.$state.data.users.data,e=i.$state.data.users.data;return n.value!=""?(e=l.filter(o=>o.fullname.toUpperCase().includes(n.value.toUpperCase())||o.username.toUpperCase().includes(n.value.toUpperCase())),v=e.length,r=f(),a.value>r&&(a.value=1,k())):(e=l,v=e.length,r=f()),$(e,A,a.value)});r=f();function f(){return Math.ceil(v/A)}function B(){a.value<r&&a.value++}function P(){a.value>1&&a.value--}function k(){console.log("page :"+a.value)}function T(){S.push({path:"/Users/Create"})}async function V(l,e){b.fire({title:"Delete this data?",text:"Are you sure? You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Yes"}).then(o=>{o.isConfirmed&&i.deleteUser(l).then(s=>{L(l,e),b.fire({title:"Success",text:"User deleted successfully",icon:"success",timer:1500})}).catch(s=>{b.fire({title:"Error!",text:"Error delete data "+s,icon:"error"})}).finally(s=>{i.getUserList()})})}async function L(l,e){const o={fullname:p.value[e].fullname,username:p.value[e].username,role:p.value[e].role,id:p.value[e].id},s={access:"Users",action:"Click Delete",description:"Delete User, Data : "+JSON.stringify(o).replaceAll('"',"").replaceAll("{","").replaceAll("}","")};i.postAuditTrail(s)}return(l,e)=>{const o=R;return d(),u("div",X,[t("div",q,[t("div",z,[H,t("div",I,[t("div",K,[t("div",Q,[t("div",W,[Z,w(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>x(n)?n.value=s:null)},null,512),[[M,c(n)]]),t("div",tt,[t("button",{text:"Button",type:"button",class:"btn btn-secondary btn-md",disabled:!c(n),onClick:e[1]||(e[1]=s=>n.value="")}," X ",8,et)])])])])]),t("div",st,[t("div",at,[t("div",ot,[t("div",lt,[t("button",{type:"submit",class:"btn btn-info",onClick:e[2]||(e[2]=s=>T())}," Create New ")])])]),t("table",nt,[it,t("tbody",null,[(d(!0),u(U,null,N(c(p),(s,h)=>(d(),u("tr",{key:h},[t("td",null,[Y(o,{to:`/users/${h}`,class:"btn btn-success"},{default:G(()=>[g("Edit")]),_:2},1032,["to"]),g(" | "),t("button",{type:"button",class:"btn btn-danger",onClick:ht=>V(s.id,h)}," Delete ",8,rt)]),t("td",null,_(s.fullname),1),t("td",null,_(s.username),1),t("td",null,_(s.rolename),1),t("td",null,[s.status==1?(d(),u("span",ut,"Active")):D("",!0),s.status==0?(d(),u("span",dt,"Not Active")):D("",!0)]),ct]))),128))])])]),t("div",pt,[g(" Go To "),w(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>x(a)?a.value=s:a=s),onChange:e[4]||(e[4]=s=>k())},[(d(!0),u(U,null,N(c(r),s=>(d(),u("option",{value:s},_(s),9,_t))),256))],544),[[O,c(a)]]),g(" of "+_(c(r))+" ",1),t("ul",vt,[t("li",mt,[t("a",{class:"page-link text-white",href:"javascript:void(0);",onClick:e[5]||(e[5]=s=>P())},"Previous Page")]),t("li",gt,[t("a",{class:"page-link text-white",href:"javascript:void(0);",onClick:e[6]||(e[6]=s=>B())},"Next Page")])])])])])])}}};export{wt as default};
